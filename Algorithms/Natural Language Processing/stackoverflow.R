library(XML)
library(RCurl)

keyword <- c('Devops+Engineer',
            'Linux+Admin',
            'Linux+Engineer',
            'Systems+Admin+',
            'Systems+Engineer',
            'Network+Admin',
            'Network+Engineer',
            'Release+Engineer',
            'Software+Developer+in+Test',
            'Software+Engineer+in+Test',
            'Automation+Engineer',
            'Full+Stack+Developer',
            'Full+Stack+Engineer',
            'Ruby+on+Rails+Developer',
            'Ruby+on+Rails+Engineer',
            'Software+Developer',
            'Software+Engineer',
            'Java+Developer',
            'Java+Engineer',
            'C%23+Developer',
            'C%23+Engineer',
            'C%2B%2B+Developer',
            'C%2B%2B+Engineer',
            'Javascript+Developer',
            'Javascript+Engineer',
            'JS+Developer',
            'JS+Engineer',
            'Angular+Developer',
            'Angular+Engineer',
            'ReactJS+Developer',
            'ReactJS+Engineer',
            'iOS+Developer',
            'iOS+Engineer',
            'Android+Developer',
            'Android+Engineer',
            'Swift+Developer',
            'Swift+Engineer',
            'Mobile+Developer',
            'Mobile+Engineer',
            'Python+Developer',
            'Python+Engineer',
            'Machine+Learning+Developer',
            'Machine+Learning+Engineer',
            'IoT+Developer',
            'IoT+Engineer',
            'M2M+Developer',
            'M2M+Engineer',
            'Backend+Developer',
            'Backend+Engineer',
            'Frontend+Developer',
            'Frontend+Engineer',
            'Scala+Developer',
            'Scala+Engineer',
            'Database+Developer',
            'Database+Engineer',
            'Database+Architect',
            'Data+Architect',
            'Data+Engineer',
            'Data+Analyst',
            'Data+Analysis',
            'Business+Analyst',
            'Business+Systems+Analyst',
            'Systems+Analyst',
            'Programmer+Analyst',
            'BI+Developer',
            'BI+Engineer',
            'Business+Intelligence+Developer',
            'Business+Intelligence+Engineer',
            'Tableau+Developer',
            'Tableau+Admin',
            'Qlikview+Developer',
            'Qlikview+Admin',
            'ABAP+Developer',
            'ABAP+Engineer',
            'AWS+Architect',
            'Security+Engineer',
            'Server+Admin',
            'Server+Engineer',
            'Cloud+Developer',
            'Cloud+Engineer',
            'Platform+Developer',
            'Platform+Engineer',
            'Data+Visualization',
            'Quant+Developer',
            'Quant+Engineer',
            'Algorithm+Developer',
            'Algorithm+Engineer',
            'QA+Analyst',
            'QA+Engineer',
            'QA+Tester',
            'Quality+Assurance+Analyst',
            'Quality+Assurance+Engineer',
            'Quality+Assurance+Tester',
            'PHP+Developer',
            'PHP+Engineer',
            'DBA',
            'Database+Administrator',
            'SQL+Database+Developer',
            'SQL+Database+Engineer',
            'SSRS+Developer',
            'SSIS+Developer',
            'SQL+Server+DBA',
            'SQL+Server+Database+Administrator',
            'Oracle+DBA',
            'Oracle+Database+Administrator',
            'MySQL+DBA',
            'MySQL+Database+Administrator',
            'Hadoop+Administrator',
            'Hadoop+Developer',
            'Hadoop+Engineer',
            'Hadoop+Architect',
            'Kafka+Architect',
            'Kafka+Engineer',
            'Kafka+Developer',
            'Messaging+Architect',
            'GIS+Analyst',
            'GIS+Engineer',
            'Geospatial+Analyst',
            'Geospatial+Engineer',
            'Analytics+Developer',
            'Analytics+Engineer',
            'R+Developer',
            'SOA+Architect',
            'SOA+Developer',
            'Distributed+Systems+Developer',
            'Distributed+Systems+Engineer',
            'Spark+Developer',
            'UI+Developer',
            'UI+Engineer',
            'UI+Designer',
            'UX+Designer',
            'UX+Architect',
            'Search+Developer',
            'Search+Engineer',
            'Performance+Engineer',
            'Performance+Tester',
            'SCM+Admin',
            'SCM+Eng',
            'Devops+Eng',
            'Linux+Admin',
            'Linux+Eng',
            'Systems+Admin',
            'Systems+Eng',
            'Network+Admin',
            'Network+Eng',
            'Release+Eng',
            'Software+Dev+in+Test',
            'Software+Eng+in+Test',
            'Automation+Eng',
            'Full+Stack+Dev',
            'Full+Stack+Eng',
            'Ruby+on+Rails+Dev',
            'Ruby+on+Rails+Eng',
            'Software+Dev',
            'Software+Eng',
            'Java+Dev',
            'Java+Eng',
            'C%23+Dev',
            'C%23+Eng',
            'C%2B%2B+Dev',
            'C%2B%2B+Eng',
            'Javascript+Dev',
            'Javascript+Eng',
            'JS+Dev',
            'JS+Eng',
            'Angular+Dev',
            'Angular+Eng',
            'ReactJS+Dev',
            'ReactJS+Eng',
            'iOS+Dev',
            'iOS+Eng',
            'Android+Dev',
            'Android+Eng',
            'Swift+Dev',
            'Swift+Eng',
            'Mobile+Dev',
            'Mobile+Eng',
            'Python+Dev',
            'Python+Eng',
            'Machine+Learning+Dev',
            'Machine+Learning+Eng',
            'IoT+Dev',
            'IoT+Eng',
            'M2M+Dev',
            'M2M+Eng',
            'Backend+Dev',
            'Backend+Eng',
            'Frontend+Dev',
            'Frontend+Eng',
            'Software+Dev',
            'Software+Eng',
            'Scala+Dev',
            'Scala+Eng',
            'Database+Dev',
            'Database+Eng',
            'Database+Architect',
            'Data+Architect',
            'Data+Eng',
            'Data+Analyst',
            'Data+Analysis',
            'Business+Analyst',
            'Business+Systems+Analyst',
            'Systems+Analyst',
            'Programmer+Analyst',
            'BI+Dev',
            'BI+Eng',
            'Business+Intelligence+Dev',
            'Business+Intelligence+Eng',
            'Tableau+Dev',
            'Tableau+Admin',
            'Qlikview+Dev',
            'Qlikview+Admin',
            'ABAP+Dev',
            'ABAP+Eng',
            'AWS+Architect',
            'Security+Eng',
            'Server+Admin',
            'Server+Eng',
            'Cloud+Dev',
            'Cloud+Eng',
            'Platform+Dev',
            'Platform+Eng',
            'Data+Visualization',
            'Quant+Dev',
            'Quant+Eng',
            'Algorithm+Dev',
            'Algorithm+Eng',
            'QA+Analyst',
            'QA+Eng',
            'QA+Tester',
            'Quality+Assurance+Analyst',
            'Quality+Assurance+Eng',
            'Quality+Assurance+Tester',
            'PHP+Dev',
            'PHP+Eng',
            'DBA',
            'Database+Admin',
            'SQL+Database+Dev',
            'SQL+Database+Eng',
            'SSRS+Dev',
            'SSIS+Dev',
            'SQL+Server+DBA',
            'SQL+Server+Database+Admin',
            'Oracle+DBA',
            'Oracle+Database+Admin',
            'MySQL+DBA',
            'MySQL+Database+Admin',
            'Hadoop+Admin',
            'Hadoop+Dev',
            'Hadoop+Eng',
            'Hadoop+Architect',
            'Kafka+Architect',
            'Kafka+Eng',
            'Kafka+Dev',
            'Messaging+Architect',
            'GIS+Analyst',
            'GIS+Eng',
            'Geospatial+Analyst',
            'Geospatial+Eng',
            'Analytics+Dev',
            'Analytics+Eng',
            'R+Dev',
            'SOA+Architect',
            'SOA+Dev',
            'Distributed+Systems+Dev',
            'Distributed+Systems+Eng',
            'Spark+Dev',
            'UI+Dev',
            'UI+Eng',
            'UI+Designer',
            'UX+Designer',
            'UX+Architect',
            'Search+Dev',
            'Search+Eng',
            'Performance+Eng',
            'Performance+Tester',
            'SCM+Admin',
            'SCM+Eng')

keyword <- unique(keyword)[1:10]


for(word in keyword){
  stack_url <- paste('https://stackoverflow.com/jobs/feed?searchTerm=', word, sep = "")
  stack_feed <- getURL(stack_url)
  stack_feed_xml <- xmlParse(stack_feed)
  stack_feed_urls <- unlist(xpathApply(stack_feed_xml, '//link', xmlValue))

  cnt <- 1
  for(url in stack_feed_urls){
    job_url <- getURL(url)
    job_html <- htmlParse(job_url)
    job_description <- gsub("[[:space:]]", " ", unlist(xpathApply(job_html, '//ul', xmlValue)))
    job_title <- gsub("[[:space:]]|[[:punct:]]|'|", "", unlist(xpathApply(job_html, '//h1', xmlValue))[1])
    write.table(job_description[7:length(job_description)], paste("stackoverflow_jobs_temp/", job_title, "_", cnt, ".txt", sep = ""), 
                col.names = F, row.names = F, quote = FALSE)
    print(paste(word, cnt, sep = ", "))
    cnt <- cnt + 1
  }
}